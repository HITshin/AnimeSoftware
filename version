v4.00

offset autoupdate
small code refactoring
